!async function(){const e=document.querySelectorAll(".form__field");e.forEach((e=>{e.addEventListener("focus",(()=>{e.closest(".form__item").classList.add("focused")}))})),e.forEach((e=>{e.addEventListener("blur",(()=>{e.closest(".form__item").classList.remove("focused")}))}));const t=await fetch("../data/countryCodes.json"),n=await t.json(),r=document.querySelector("#country");document.querySelector("#phone");n.forEach((e=>{const t=document.createElement("option");t.value=e.country,t.textContent=e.country,r.appendChild(t)}));const s=document.querySelector(".select"),o=document.querySelector(".select__text"),i=o.length,l=document.createElement("DIV");l.setAttribute("class","select__field"),l.innerHTML=o.options[o.selectedIndex].innerHTML,s.appendChild(l);const a=document.createElement("DIV");a.setAttribute("class","select__items select__hide");for(let e=1;e<i;e++){const t=document.createElement("DIV");t.innerHTML=o.options[e].innerHTML,t.addEventListener("click",(function(){for(let e=0;e<i;e++)if(o.options[e].innerHTML===this.innerHTML){o.selectedIndex=e,console.log(o.value),m(this.innerHTML),l.innerHTML=this.innerHTML;let t=this.parentNode.getElementsByClassName("same-as-selected");for(let e=0;e<t.length;e++)t[e].removeAttribute("class");this.setAttribute("class","same-as-selected");break}l.click(),$(o).valid()})),a.appendChild(t)}const c=document.createElement("label");c.textContent="Country",c.setAttribute("for","country"),c.setAttribute("class","select__label"),s.appendChild(a),f(),s.appendChild(c),l.addEventListener("click",(function(e){e.stopPropagation(),this.nextSibling.classList.toggle("select__hide"),this.classList.toggle("select-arrow-active")})),document.addEventListener("click",(function(){l.classList.remove("select-arrow-active"),a.classList.add("select__hide")}));const d=document.querySelector("#phone");let u="";function m(e){u=n.find((t=>t.country===e)).code,d.value=h(d.value)}function h(e){const t=e.slice(u.length).replace(/\D/g,"");let n="";for(let e=0;e<t.length;e++)0===e?n+="(":2===e?n+=") ":(5===e||7===e)&&(n+=" "),n+=t[e];return u+" "+n.slice(0,14)}function f(){const e=document.querySelector(".form__item"),t=document.querySelector(".select__items"),n=e.offsetWidth;t.style.width=n+"px"}d.addEventListener("input",(e=>{d.value=h(e.target.value)})),window.addEventListener("resize",f),$((function(){$.validator.addMethod("passwordPattern",(function(e,t){return this.optional(t)||/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{5,}$/.test(e)}),"Password must have at least one letter, one number, and one symbol."),$("form[name='registration']").validate({rules:{firstName:{required:!0,minlength:3},secondName:{required:!0,minlength:3},country:{required:!0},phone:{required:!0,minlength:14},password:{required:!0,passwordPattern:!0},confirmPassword:{required:!0,passwordPattern:!0,equalTo:"#password"},email:{required:!0,email:!0},agree:"required"},messages:{firstName:{required:"Fill in the field",minlength:"The name must be more than 2 characters"},secondName:{required:"Fill in the field",minlength:"The second name must be more than 2 characters"},country:{required:"Fill in the field"},phone:{required:"Fill in the field",minlength:"Your phone number is not correct"},password:{required:"Fill in the field",passwordPattern:"Password must have 1 letter, 1 number and one symbol"},confirmPassword:{required:"Fill in the field",passwordPattern:"Password must have 1 letter, 1 number and one symbol",equalTo:" Password does not match"},email:{required:"Fill in the field",email:"Email is not correct"}},submitHandler:function(e){e.submit()},invalidHandler:function(){$(".logo").remove()}})}))}();